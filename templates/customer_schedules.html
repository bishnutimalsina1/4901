{% extends 'index.html' %}


<head>
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Timely</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="https://live.staticflickr.com/65535/51638677196_6b09258823_o.png"/>
    <!-- Bootstrap icons-->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet"/>

</head>
{%block addl_styles %}
<style>
    .contractor_dash {
        font-weight: bold;
    }

    .active_project {
        font-weight: bold;
        padding: 2px;
    }
</style>
{% endblock %}


<body class="d-flex flex-column h-100">
{% block content %}
<!--main section start-->
<main class="flex-shrink-0">
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <!-- Image and text -->
                <nav class="navbar navbar-light bg-none">

                </nav>
            </div>

            <ul class="list-unstyled components">
                <p></p>

                <li >
                    <a href="{{url_for('customer_dashboard')}}"><i class="bi bi-house-door-fill"></i></i>&nbsp;&nbsp;Overview</a>
                </li>
                <li>
                    <a href="{{url_for('projects')}}"><i class="bi bi-trophy-fill"></i></i>&nbsp;&nbsp;Projects</a>
                </li>
                <li class="active">
                    <a href="{{url_for('customer_schedules')}}"><i class="bi bi-calendar2-week-fill"></i></i>&nbsp;&nbsp;Schedules</a>
                </li>
                <li>
                    <a href="{{url_for('reports')}}"><i class="bi bi-bar-chart-fill"></i></i>&nbsp;&nbsp;Reports</a>
                </li>
            </ul>

            <ul class="list-unstyled CTAs">
                <li>
                    <a href="https://bootstrapious.com/tutorial/files/sidebar.zip" class="download"><i
                            class="bi bi-gear-fill"></i>&nbsp;&nbsp;Settings</a>
                </li>
                <li>
                    <a href="https://bootstrapious.com/p/bootstrap-sidebar" class="article btn-primary"><i
                            class="bi bi-box-arrow-right"></i>&nbsp;&nbsp;Log Out</a>
                </li>
            </ul>
            <div class="sidebar-header" >
                    <div class="card h-20 shadow-lg border-0 bg-gradient2 ">
                            <img src="/static/assets/man.png"  class="img-fluid " alt="">
                            <div class="card-body p-2">
                                <a class="text-decoration-none link-dark stretched-link" href="#!">
                                    <h5 class="fs-5 fw-bold text-white">Just relax</h5>
                                </a>
                                <p class="text-white-50">Watch your projects progress in realtime</p>
                            </div>
                        </div>
                </div>
        </nav>

        <!-- Page Content  -->
        <div id="content" style="width: 100%; background-color: #a1d1af42;">



            <!-- Features section-->
            <section class="py-4 px-3" id="features">
                <div class="row">

                    <!-- Area Chart -->
                    <div class="col-xl-7 col-lg-7">
                        <div class="card mb-4">
                            <!-- Card Header - Dropdown -->
                            <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-black">Active Projects</h6>

                                <!--<div class="dropdown no-arrow">
                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                         aria-labelledby="dropdownMenuLink">
                                        <div class="dropdown-header">Dropdown Header:</div>
                                        <a class="dropdown-item" href="#">Action</a>
                                        <a class="dropdown-item" href="#">Another action</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">Something else here</a>
                                    </div>
                                </div>-->
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-area">

                                    <!-- Card Body -->
                                    <div class="card-body" style="border-width: 0;text-align: left;">

                                        <!--  -->
                                        <div class="row">
                                            <!-- Nav tabs -->
                                            <div class="card">
                                                <div class="card-header">
                                                    <ul class="nav nav-tabs justify-content-left" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link active" data-toggle="tab" href="#active"
                                                               role="tab">
                                                                <i class="now-ui-icons objects_umbrella-13"></i> Active
                                                            </a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" data-toggle="tab" href="#inactive"
                                                               role="tab">
                                                                <i class="now-ui-icons shopping_cart-simple"></i>
                                                                Inactive
                                                            </a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" data-toggle="tab" href="#complete"
                                                               role="tab">
                                                                <i class="now-ui-icons shopping_shop"></i> Complete
                                                            </a>
                                                        </li>

                                                    </ul>
                                                </div>
                                                <div class="card-body">
                                                    <!-- Tab panes -->
                                                    <div class="tab-content text-center">
                                                        <div class="tab-pane active" id="active" role="tabpanel">
                                                            <table class="table">
                                                                <thead>
                                                                <tr>
                                                                    <th scope="col">Project Name</th>
                                                                    <th scope="col">Start Date</th>
                                                                    <th scope="col">End Date</th>
                                                                    <th scope="col">Progress</th>
                                                                    <th scope="col"></th>
                                                                    <th scope="col">Action</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                {% for job in job_data %}
                                                                {% if '100' not in job['progress'] and job['user_id'] == uid%}
                                                                <tr>
                                                                    <th style="text-align: left" scope="row">
                                                                        {{job["job_title"]}}
                                                                    </th>

                                                                    <td>{{job["job_started_on"]}}</td>
                                                                    <td>{{job["job_complete_on"]}}</td>
                                                                    <td>
                                                                        <div class="progress">
                                                                            <div class="progress-bar" role="progressbar"
                                                                                 style="width: {{job['progress']}}%"
                                                                                 aria-valuenow="25"
                                                                                 aria-valuemin="0" aria-valuemax="100">
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td>

                                                                        <div class="modal fade" id="editModal{{job['id']}}"
                                                                             data-bs-backdrop="static"
                                                                             data-bs-keyboard="false"
                                                                             tabindex="-1"
                                                                             aria-labelledby="staticBackdropLabel"
                                                                             aria-hidden="true">
                                                                            <div class="modal-dialog">
                                                                                <div class="modal-content">
                                                                                    <div class="modal-header">
                                                                                        <h5 class="modal-title"
                                                                                            id="editBackdropLabel">Edit
                                                                                            Task</h5>
                                                                                        <button type="button"
                                                                                                class="btn-close"
                                                                                                data-bs-dismiss="modal"
                                                                                                aria-label="Close"></button>
                                                                                    </div>
                                                                                    <div class="modal-body">
                                                                                        <form method="post"
                                                                                              action="/editTask">
                                                                                            <div class="mb-3">
                                                                                                <label for="edit_task_name"
                                                                                                       class="form-label">Project
                                                                                                    Name</label>
                                                                                                <input class="form-control"
                                                                                                       id="edit_task_name"
                                                                                                       name="task_name"
                                                                                                       value={{job["job_title"]}}
                                                                                                       required>

                                                                                            </div>
                                                                                            <div class="mb-3">
                                                                                                <label for="edit_eventstartdate">Start
                                                                                                    Date</label>
                                                                                                <input id="edit_eventstartdate"
                                                                                                       type="date"
                                                                                                       name="eventstartdate"
                                                                                                       value={{job['job_started_on'].date()}}
                                                                                                       required>
                                                                                                <!--                                                                     <label for="eventstarttime">Start Time</label>-->
                                                                                                <input id="edit_eventstarttime"
                                                                                                       type="time"
                                                                                                       name="eventstarttime"
                                                                                                       value={{job['job_started_on'].time()}}>
                                                                                            </div>
                                                                                            <div class="mb-3">

                                                                                                <label for="edit_eventenddate">End
                                                                                                    Date</label>
                                                                                                <input id="edit_eventenddate"
                                                                                                       type="date"
                                                                                                       name="eventenddate"
                                                                                                       value={{job['job_complete_on'].date()}}
                                                                                                       required>
                                                                                                <!--                                                                     <label for="eventstarttime">Start Time</label>-->
                                                                                                <input id="edit_eventendtime"
                                                                                                       type="time"
                                                                                                       name="eventendtime"
                                                                                                       value="{{job['job_complete_on'].time()}}">

                                                                                            </div>

                                                                                            <div class="mb-3">

                                                                                                <label for="progress"
                                                                                                       class="form-label">Progress</label>
                                                                                                <input type="range"
                                                                                                       class="form-range"
                                                                                                       min="0" max="100"
                                                                                                       step="1"
                                                                                                       id="edit_progress{{job['id']}}"
                                                                                                       name="progress"
                                                                                                       value={{job['progress']|int}}>
                                                                                                       required>
                                                                                                <p>Value: <span
                                                                                                        id="edit_progressoutput{{job['id']}}">{{job['progress']}}</span>
                                                                                                </p>

                                                                                            </div>
                                                                                            <div class="mb-3">
                                                                                                <label for="exampleColorInput"
                                                                                                       class="form-label">Color
                                                                                                    picker</label>
                                                                                                <input type="color"
                                                                                                       class="form-control form-control-color"
                                                                                                       id="edit_ColorInput{{job['id']}}"
                                                                                                       name="exampleColorInput"
                                                                                                       value="#563d7c"
                                                                                                       title="Choose your color">
                                                                                            </div>
                                                                                            <p>Color Value: <span
                                                                                                    id="edit_coloroutput{{job['id']}}"
                                                                                                    >{{job['color']}}</span>
                                                                                            </p>
                                                                                            <div class="modal-footer">
                                                                                                <button type="button"
                                                                                                        class="btn btn-secondary"
                                                                                                        data-bs-dismiss="modal">
                                                                                                    Close
                                                                                                </button>
                                                                                                <button type="submit"
                                                                                                        class="btn btn-primary">
                                                                                                    Submit
                                                                                                </button>
                                                                                            </div>
                                                                                            <script>
                                                                                                var edit_slider{{job['id']}} = document.getElementById("edit_progress{{job['id']}}");
                                                                                                var edit_output{{job['id']}} = document.getElementById("edit_progressoutput{{job['id']}}");
                                                                                                edit_output{{job['id']}}.innerHTML = edit_slider{{job['id']}}.value;
                                                                                                var edit_color_input{{job['id']}} = document.getElementById("edit_ColorInput{{job['id']}}");
                                                                                                var edit_color_output{{job['id']}} = document.getElementById("edit_coloroutput{{job['id']}}");
                                                                                                edit_slider{{job['id']}}.oninput = function () {
                                                                                                    edit_output{{job['id']}}.innerHTML = this.value;
                                                                                                }
                                                                                                edit_color_input{{job['id']}}.oninput = function () {
                                                                                                    edit_color_output{{job['id']}}.innerHTML = this.value;
                                                                                                }
                                                                                            </script>
                                                                                            <input type="hidden"
                                                                                                   name="user_id"
                                                                                                   value="{{ current_user.id }}">
                                                                                             <input type="hidden"
                                                                                                   name="task_id"
                                                                                                   value="{{ job['id'] }}">
                                                                                        </form>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </td>
                                                                    <td>

                                                                    </td>
                                                                </tr>
                                                                {% endif %}
                                                                {%endfor%}


                                                                </tbody>

                                                            </table>


                                                            <!-- Modal -->
                                                            <div class="modal fade" id="staticBackdrop"
                                                                 data-bs-backdrop="static" data-bs-keyboard="false"
                                                                 tabindex="-1" aria-labelledby="staticBackdropLabel"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="staticBackdropLabel">Add new
                                                                                Task</h5>
                                                                            <button type="button" class="btn-close"
                                                                                    data-bs-dismiss="modal"
                                                                                    aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <form method="post" action="/addTask">
                                                                                <div class="mb-3">
                                                                                    <label for="exampleInputEmail1"
                                                                                           class="form-label">Project
                                                                                        Name</label>
                                                                                    <input class="form-control"
                                                                                           id="exampleInputEmail1"
                                                                                           name="task_name" required>

                                                                                </div>
                                                                                <div class="mb-3">
                                                                                    <label for="eventstartdate">Start
                                                                                        Date</label>
                                                                                    <input id="eventstartdate"
                                                                                           type="date"
                                                                                           name="eventstartdate"
                                                                                           required>
                                                                                    <!--                                                                     <label for="eventstarttime">Start Time</label>-->
                                                                                    <input id="eventstarttime"
                                                                                           type="time"
                                                                                           name="eventstarttime"
                                                                                           value="13:30">
                                                                                </div>
                                                                                <div class="mb-3">

                                                                                    <label for="eventenddate">End
                                                                                        Date</label>
                                                                                    <input id="eventenddate" type="date"
                                                                                           name="eventenddate" required>
                                                                                    <!--                                                                     <label for="eventstarttime">Start Time</label>-->
                                                                                    <input id="eventendtime" type="time"
                                                                                           name="eventendtime"
                                                                                           value="13:30">

                                                                                </div>

                                                                                <div class="mb-3">

                                                                                    <label for="progress"
                                                                                           class="form-label">Progress</label>
                                                                                    <input type="range"
                                                                                           class="form-range"
                                                                                           min="0" max="100" step="1"
                                                                                           id="progress" name="progress"
                                                                                           required>
                                                                                    <p>Value: <span
                                                                                            id="progressoutput"></span>
                                                                                    </p>

                                                                                </div>
                                                                                <div class="mb-3">
                                                                                    <label for="exampleColorInput"
                                                                                           class="form-label">Color
                                                                                        picker</label>
                                                                                    <input type="color"
                                                                                           class="form-control form-control-color"
                                                                                           id="exampleColorInput"
                                                                                           name="exampleColorInput"
                                                                                           value="#563d7c"
                                                                                           title="Choose your color">
                                                                                </div>
                                                                                <p>Color Value: <span id="coloroutput"
                                                                                                      name="coloroutput"></span>
                                                                                </p>
                                                                                <div class="modal-footer">
                                                                                    <button type="button"
                                                                                            class="btn btn-secondary"
                                                                                            data-bs-dismiss="modal">
                                                                                        Close
                                                                                    </button>
                                                                                    <button type="submit"
                                                                                            class="btn btn-primary">
                                                                                        Submit
                                                                                    </button>
                                                                                </div>
                                                                                <script>
                                                                                    var slider = document.getElementById("progress");
                                                                                    var output = document.getElementById("progressoutput");
                                                                                    output.innerHTML = slider.value;
                                                                                    var color_input = document.getElementById("exampleColorInput");
                                                                                    var color_ouput = document.getElementById("coloroutput");
                                                                                    slider.oninput = function () {
                                                                                        output.innerHTML = this.value;
                                                                                    }
                                                                                    color_input.oninput = function () {
                                                                                        color_ouput.innerHTML = this.value;
                                                                                    }
                                                                                </script>
                                                                                <input type="hidden" name="user_id"
                                                                                       value="{{ current_user.id }}">
                                                                            </form>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!--     modal end    -->
                                                        </div>
                                                        <div class="tab-pane" id="inactive" role="tabpanel">
                                                            <!-- insert table here -->
                                                        </div>
                                                        <div class="tab-pane" id="complete" role="tabpanel">
<!--                                                            complete table start-->
                                                            <table class="table">
                                                                <thead>
                                                                <tr>
                                                                    <th scope="col">Project Name</th>
                                                                    <th scope="col">Start Date</th>
                                                                    <th scope="col">End Date</th>
                                                                    <th scope="col">Progress</th>
                                                                    <th scope="col"></th>
                                                                    <th scope="col">Action</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>

                                                                {% for job in job_data %}
                                                                {% if '100' in job['progress'] and job['user_id'] == uid %}
                                                                <tr>
                                                                    <th style="text-align: left" scope="row">
                                                                        {{job["job_title"]}}
                                                                    </th>

                                                                    <td>{{job["job_started_on"]}}</td>
                                                                    <td>{{job["job_complete_on"]}}</td>
                                                                    <td>
                                                                        <div class="progress">
                                                                            <div class="progress-bar" role="progressbar"
                                                                                 style="width: {{job['progress']}}%"
                                                                                 aria-valuenow="25"
                                                                                 aria-valuemin="0" aria-valuemax="100">
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td>

                                                                        <div class="modal fade" id="editModal{{job['id']}}"
                                                                             data-bs-backdrop="static"
                                                                             data-bs-keyboard="false"
                                                                             tabindex="-1"
                                                                             aria-labelledby="staticBackdropLabel"
                                                                             aria-hidden="true">
                                                                            <div class="modal-dialog">
                                                                                <div class="modal-content">
                                                                                    <div class="modal-header">
                                                                                        <h5 class="modal-title"
                                                                                            id="editBackdropLabel">Edit
                                                                                            Task</h5>
                                                                                        <button type="button"
                                                                                                class="btn-close"
                                                                                                data-bs-dismiss="modal"
                                                                                                aria-label="Close"></button>
                                                                                    </div>
                                                                                    <div class="modal-body">
                                                                                        <form method="post"
                                                                                              action="/editTask">
                                                                                            <div class="mb-3">
                                                                                                <label for="edit_task_name"
                                                                                                       class="form-label">Project
                                                                                                    Name</label>
                                                                                                <input class="form-control"
                                                                                                       id="edit_task_name"
                                                                                                       name="task_name"
                                                                                                       value={{job["job_title"]}}
                                                                                                       required>

                                                                                            </div>
                                                                                            <div class="mb-3">
                                                                                                <label for="edit_eventstartdate">Start
                                                                                                    Date</label>
                                                                                                <input id="edit_eventstartdate"
                                                                                                       type="date"
                                                                                                       name="eventstartdate"
                                                                                                       value={{job['job_started_on'].date()}}
                                                                                                       required>
                                                                                                <!--                                                                     <label for="eventstarttime">Start Time</label>-->
                                                                                                <input id="edit_eventstarttime"
                                                                                                       type="time"
                                                                                                       name="eventstarttime"
                                                                                                       value={{job['job_started_on'].time()}}>
                                                                                            </div>
                                                                                            <div class="mb-3">

                                                                                                <label for="edit_eventenddate">End
                                                                                                    Date</label>
                                                                                                <input id="edit_eventenddate"
                                                                                                       type="date"
                                                                                                       name="eventenddate"
                                                                                                       value={{job['job_complete_on'].date()}}
                                                                                                       required>
                                                                                                <!--                                                                     <label for="eventstarttime">Start Time</label>-->
                                                                                                <input id="edit_eventendtime"
                                                                                                       type="time"
                                                                                                       name="eventendtime"
                                                                                                       value="{{job['job_complete_on'].time()}}">

                                                                                            </div>

                                                                                            <div class="mb-3">

                                                                                                <label for="progress"
                                                                                                       class="form-label">Progress</label>
                                                                                                <input type="range"
                                                                                                       class="form-range"
                                                                                                       min="0" max="100"
                                                                                                       step="1"
                                                                                                       id="edit_progress{{job['id']}}"
                                                                                                       name="progress"
                                                                                                       value={{job['progress']|int}}>
                                                                                                       required>
                                                                                                <p>Value: <span
                                                                                                        id="edit_progressoutput{{job['id']}}">{{job['progress']}}</span>
                                                                                                </p>

                                                                                            </div>
                                                                                            <div class="mb-3">
                                                                                                <label for="exampleColorInput"
                                                                                                       class="form-label">Color
                                                                                                    picker</label>
                                                                                                <input type="color"
                                                                                                       class="form-control form-control-color"
                                                                                                       id="edit_ColorInput{{job['id']}}"
                                                                                                       name="exampleColorInput"
                                                                                                       value="#563d7c"
                                                                                                       title="Choose your color">
                                                                                            </div>
                                                                                            <p>Color Value: <span
                                                                                                    id="edit_coloroutput{{job['id']}}"
                                                                                                    >{{job['color']}}</span>
                                                                                            </p>
                                                                                            <div class="modal-footer">
                                                                                                <button type="button"
                                                                                                        class="btn btn-secondary"
                                                                                                        data-bs-dismiss="modal">
                                                                                                    Close
                                                                                                </button>
                                                                                                <button type="submit"
                                                                                                        class="btn btn-primary">
                                                                                                    Submit
                                                                                                </button>
                                                                                            </div>
                                                                                            <script>
                                                                                                var edit_slider{{job['id']}} = document.getElementById("edit_progress{{job['id']}}");
                                                                                                var edit_output{{job['id']}} = document.getElementById("edit_progressoutput{{job['id']}}");
                                                                                                edit_output{{job['id']}}.innerHTML = edit_slider{{job['id']}}.value;
                                                                                                var edit_color_input{{job['id']}} = document.getElementById("edit_ColorInput{{job['id']}}");
                                                                                                var edit_color_output{{job['id']}} = document.getElementById("edit_coloroutput{{job['id']}}");
                                                                                                edit_slider{{job['id']}}.oninput = function () {
                                                                                                    edit_output{{job['id']}}.innerHTML = this.value;
                                                                                                }
                                                                                                edit_color_input{{job['id']}}.oninput = function () {
                                                                                                    edit_color_output{{job['id']}}.innerHTML = this.value;
                                                                                                }
                                                                                            </script>
                                                                                            <input type="hidden"
                                                                                                   name="user_id"
                                                                                                   value="{{ current_user.id }}">
                                                                                             <input type="hidden"
                                                                                                   name="task_id"
                                                                                                   value="{{ job['id'] }}">
                                                                                        </form>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </td>
                                                                    <td>

                                                                    </td>
                                                                </tr>

                                                                {% endif %}
                                                                {%endfor%}



                                                                </tbody>

                                                            </table>
<!--                                                            complete table end-->
                                                        </div>
                                                        <div class="tab-pane" id="settings" role="tabpanel">
                                                            <!-- insert table here -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- End Tabs on plain Card -->

                                            <!--  -->
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                         <div class="row">
                        <!-- Area Chart -->
                            <script>
        (function(d, s, id) {
            if (d.getElementById(id)) {
                if (window.__TOMORROW__) {
                    window.__TOMORROW__.renderWidget();
                }
                return;
            }
            const fjs = d.getElementsByTagName(s)[0];
            const js = d.createElement(s);
            js.id = id;
            js.src = "https://www.tomorrow.io/v1/widget/sdk/sdk.bundle.min.js";

            fjs.parentNode.insertBefore(js, fjs);
        })(document, 'script', 'tomorrow-sdk');
        </script>

        <div class="tomorrow"
           data-location-id="115247"
           data-language="EN"
           data-unit-system="IMPERIAL"
           data-skin="light"
           data-widget-type="aqiPollen"
           style="padding-bottom:22px;position:relative;"
        >
          <a
            href="https://www.tomorrow.io/weather/"
            rel="nofollow noopener noreferrer"
            target="_blank"
            style="position: absolute; bottom: 0; transform: translateX(-50%); left: 50%;"
          >
            <img
              alt="Powered by Tomorrow.io"
              src="https://weather-website-client.tomorrow.io/img/powered-by-tomorrow.svg"
              width="140"
              height="15"
            />
          </a>
        </div>
                        </div>
                    </div>


                    <!-- Pie Chart -->
                    <div class="col-xl-5 col-lg-5">
                        <div class="card mb-4">
                            <!-- Card Header - Dropdown -->
                            <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-black">Calendar</h6>
                                <!--<div class="dropdown no-arrow">
                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                         aria-labelledby="dropdownMenuLink">
                                        <div class="dropdown-header">Dropdown Header:</div>
                                        <a class="dropdown-item" href="#">Action</a>
                                        <a class="dropdown-item" href="#">Another action</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">Something else here</a>
                                    </div>
                                </div>-->

                            </div>
                            <!-- Card Body -->

                            <div class="card-body">

                                <div class="chart-pie pt-4 pb-2">
                                    <div id="calendar"></div>
                                </div>
                                <!--<div class="mt-4 text-center small">
                                        <span class="mr-2">
                                            <i class="fas fa-circle text-primary"></i> Direct
                                        </span>
                                    <span class="mr-2">
                                            <i class="fas fa-circle text-success"></i> Social
                                        </span>
                                    <span class="mr-2">
                                            <i class="fas fa-circle text-info"></i> Referral
                                        </span>
                                </div>-->
                            </div>
                        </div>
                    </div>

                </div>
                <!-- Content Row -->
<!--                alert-->
        <div class="" id="liveAlertPlaceholder" style="position:fixed;
                top: 1rem;
                right: 1rem;
                width: 30%;
                z-index:9999;
                border-radius:0px"></div>
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div id="alert1" style="position:fixed; bottom: 1rem; right: 1rem;  width: 30%;" class="shadow alert alert-{{ category }} alert-dismissible fade show d-flex align-items-center" role="alert">
                <span>{{ message }}</span>
            </div>
        <script type="text/javascript">
            setTimeout(function () {

                // Closing the alert
                $('#alert1').alert('close');
            }, 4000);
        </script>
        {% endfor %}
    {% endif %}
{% endwith %}
<!--                alert-->


            </section>

        </div>
    </div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
            integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
            crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
            integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
            crossorigin="anonymous"></script>
<script>
                                function dateAlert() {
                                // alert
                                    var alertPlaceholder = document.getElementById('liveAlertPlaceholder')
                                    var alertTrigger = document.getElementById('liveAlertBtn')

                                    function alert(message, type) {
                                      var wrapper = document.createElement('div')
                                      wrapper.innerHTML = '<div class="shadow rounded alert alert-' + type + ' alert-dismissible" role="alert">' + message + '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>'

                                      alertPlaceholder.append(wrapper)
                                    }
                                    // alert

                                const table = document.querySelector('table')
                                let today = new Date();
                                let rows = 0;
                                for (const r of table.rows) {
                                    let i = 0;
                                    let taskname = "";
                                  for (const c of r.cells) {

                                    if(i == 0){
                                        taskname = c.innerHTML;
                                    }
                                    if(i == 1){
                                        // start
                                    }  else if(i == 2 && rows > 0){
                                        // end
                                        console.log(c.innerHTML)
                                        var javaDate = new Date(c.innerHTML);

                                        const diffTime = Math.abs(javaDate - today);
                                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                                        if(diffDays < 5){
                                            var Omega = '⚠️';
                                            alert(`${Omega} ${taskname} task is due soon`, 'warning')
                                        }
                                    }
                                      i++;
                                  }
                                  rows++;
                                }
                                }
                                dateAlert()
                            </script>
    {% block addl_scripts%}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
                $('')
            });
            $('.contractor_dash').attr('style', 'font-weight:bold');
        });
    </script>

    <link href='static/css/fullcalendar.css' rel='stylesheet'/>
    <script src="/assets/js/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    <script src='static/js/fullcalendar.js'></script>
    <script>
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            headerToolbar: {
                left: 'dayGridMonth,timeGridWeek,listWeek',
                center: 'title',
                right: "prev,next"
            },
            navLinks: true,
            buttonText: {
                dayGridMonth: 'Month',
                timeGridWeek: 'Week',

                listWeek: 'List week'
            },

            initialView: 'dayGridMonth',

            dayHeaders: true,

            editable: true,
            eventContent: function (arg) {
                return {html: arg.event.title};
            },
            events: [
                {% for job in job_data %}
                {% if '100' not in job['progress'] and job['user_id'] == uid %}
                    {
                        title : '{{job["job_title"]}}',
                        start :'{{job["job_started_on"]}}',
                        end:'{{job["job_complete_on"]}}',
                        color:'{{job["color"]}}'
                    },
                {% endif %}
                {% endfor %}
        ]})
        calendar.render();
    </script>
    {% endblock %}
</main>
<!--main section end-->
<!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/623f984b0bfe3f4a876fde94/1fv46lpfn';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
</body>


{% endblock %}